<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Python Quiz 100 ข้อ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --primary: #2563eb;
      --primary-light: #dbeafe;
      --correct: #16a34a;
      --wrong: #dc2626;
      --bg: #f3f4f6;
      --card-bg: #ffffff;
      --text-main: #111827;
      --text-muted: #6b7280;
      --border: #e5e7eb;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }

    .app {
      max-width: 900px;
      width: 100%;
      padding: 24px 16px 40px;
    }

    .card {
      background: var(--card-bg);
      border-radius: 18px;
      padding: 24px 24px 28px;
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.12);
      border: 1px solid var(--border);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      gap: 8px;
    }

    .title {
      font-size: 20px;
      font-weight: 700;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-muted);
    }

    .pill-group {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 1px solid transparent;
    }

    .pill.level {
      background: var(--primary-light);
      color: var(--primary);
      border-color: #bfdbfe;
    }

    .pill.score {
      background: #ecfdf3;
      color: var(--correct);
      border-color: #bbf7d0;
    }

    .pill.mistake {
      background: #fef2f2;
      color: var(--wrong);
      border-color: #fecaca;
    }

    .progress-container {
      margin: 16px 0 18px;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: var(--primary);
      transition: width 0.25s ease;
    }

    .progress-text {
      margin-top: 6px;
      font-size: 12px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
    }

    .question-number {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--text-muted);
    }

    .question-text {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
      line-height: 1.6;
    }

    pre.code {
      background: #0b1120;
      color: #e5e7eb;
      padding: 10px 12px;
      border-radius: 10px;
      font-size: 13px;
      overflow-x: auto;
      margin-top: 4px;
      margin-bottom: 12px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 16px;
    }

    .option-btn {
      width: 100%;
      text-align: left;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.05s ease;
    }

    .option-btn span.tag {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 12px;
      background: #e5e7eb;
      color: #111827;
      flex-shrink: 0;
    }

    .option-btn:hover {
      background: #eff6ff;
      border-color: var(--primary);
      transform: translateY(-1px);
    }

    .option-btn.correct {
      background: #ecfdf3;
      border-color: #22c55e;
    }

    .option-btn.wrong {
      background: #fef2f2;
      border-color: #f97373;
    }

    .option-btn.disabled {
      opacity: 0.85;
      cursor: default;
      transform: none;
    }

    .option-text {
      flex: 1;
    }

    .feedback {
      min-height: 32px;
      font-size: 13px;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .feedback.correct {
      color: var(--correct);
    }

    .feedback.wrong {
      color: var(--wrong);
    }

    .footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-top: 8px;
    }

    .nav-buttons {
      display: flex;
      gap: 8px;
    }

    button.primary,
    button.secondary {
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 14px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    button.primary {
      background: var(--primary);
      color: white;
    }

    button.primary:disabled {
      background: #9ca3af;
      cursor: default;
    }

    button.secondary {
      background: #e5e7eb;
      color: #111827;
    }

    .summary {
      font-size: 14px;
      color: var(--text-muted);
    }

    .chip-row {
      margin-top: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 11px;
    }

    .chip {
      padding: 2px 8px;
      border-radius: 999px;
      background: #f3f4f6;
      color: #4b5563;
    }

    @media (max-width: 600px) {
      .card {
        padding: 18px 16px 22px;
        border-radius: 12px;
      }
      .title {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <div class="header">
        <div>
          <div class="title">แบบทดสอบ Python 100 ข้อ</div>
          <div class="subtitle">
            เรียนรู้ทีละขั้นจากพื้นฐาน → สร้างโปรแกรมจริง | ทำข้อสอบทีละข้อ คล้าย sandbox
          </div>
          <div class="chip-row">
            <div class="chip">Beginner</div>
            <div class="chip">Fundamental</div>
            <div class="chip">Intermediate</div>
            <div class="chip">Advanced</div>
            <div class="chip">Applied / Read Code</div>
          </div>
        </div>
        <div class="pill-group">
          <div class="pill level" id="level-pill">ระดับ: -</div>
          <div class="pill score"><span id="score-correct">0</span> ถูก</div>
          <div class="pill mistake"><span id="score-wrong">0</span> ผิด</div>
        </div>
      </div>

      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-text">
          <span id="progress-label">ข้อ 1 / 100</span>
          <span id="progress-percent">0%</span>
        </div>
      </div>

      <div id="question-area">
        <div class="question-number" id="question-number"></div>
        <div class="question-text" id="question-text"></div>
        <pre class="code" id="question-code" style="display:none;"></pre>

        <div class="options" id="options"></div>
        <div class="feedback" id="feedback"></div>
      </div>

      <div class="footer">
        <div class="summary" id="summary-text">
          เลือกคำตอบ แล้วกดข้อต่อไปเพื่อทำแบบฝึกหัดต่อเนื่อง
        </div>
        <div class="nav-buttons">
          <button class="secondary" id="prev-btn">ข้อก่อนหน้า</button>
          <button class="primary" id="next-btn">ข้อต่อไป</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 100 ข้อ แบ่ง 5 ระดับ ๆ ละ 20 ข้อ
    const questions = [
      // ===== Level 1: beginner (1–20) =====
      {
        id: 1,
        level: "beginner",
        topic: "types",
        question: "ชนิดข้อมูลของค่า 3.14 ใน Python คืออะไร?",
        options: ["int", "float", "str", "bool"],
        correctIndex: 1
      },
      {
        id: 2,
        level: "beginner",
        topic: "variables",
        question: "คำสั่งใดตั้งชื่อตัวแปรได้อย่างถูกต้องตามมาตรฐาน?",
        options: ["1st_value = 10", "first-value = 10", "first_value = 10", "first value = 10"],
        correctIndex: 2
      },
      {
        id: 3,
        level: "beginner",
        topic: "operators",
        question: "ตัวดำเนินการใดใช้หารเอาเศษ (modulo)?",
        options: ["/", "//", "%", "**"],
        correctIndex: 2
      },
      {
        id: 4,
        level: "beginner",
        topic: "strings",
        question: "ผลลัพธ์ของ 'hi' * 3 คืออะไร?",
        options: ["'hi hi hi'", "'hihihi'", "Error", "'hi3'"],
        correctIndex: 1
      },
      {
        id: 5,
        level: "beginner",
        topic: "lists",
        question: "โครงสร้างใดเป็น list ที่ถูกต้อง?",
        options: ["(1, 2, 3)", "[1, 2, 3]", "{1, 2, 3}", "1, 2, 3"],
        correctIndex: 1
      },
      {
        id: 6,
        level: "beginner",
        topic: "input",
        question: "ฟังก์ชันมาตรฐานที่ใช้อ่านค่าจากผู้ใช้ผ่านคีย์บอร์ดคืออะไร?",
        options: ["scan()", "input()", "read()", "get()"],
        correctIndex: 1
      },
      {
        id: 7,
        level: "beginner",
        topic: "if",
        question: "โครงสร้าง if ที่ถูกต้องคือข้อใด?",
        options: [
          "if x > 0 print('ok')",
          "if x > 0: print('ok')",
          "if (x > 0) { print('ok') }",
          "if x > 0 then print('ok')"
        ],
        correctIndex: 1
      },
      {
        id: 8,
        level: "beginner",
        topic: "loops",
        question: "คำสั่งใดพิมพ์เลข 0,1,2,3 ถูกต้อง?",
        options: [
          "for i in range(1,4): print(i)",
          "for i in range(4): print(i)",
          "for i in range(0,3): print(i)",
          "for i in [1,2,3,4]: print(i)"
        ],
        correctIndex: 1
      },
      {
        id: 9,
        level: "beginner",
        topic: "len",
        question: "len([1, 2, 3, 4]) ให้ค่าเท่าไร?",
        options: ["3", "4", "'4'", "Error"],
        correctIndex: 1
      },
      {
        id: 10,
        level: "beginner",
        topic: "bool",
        question: "ผลลัพธ์ของ bool(0) คืออะไร?",
        options: ["True", "False", "None", "Error"],
        correctIndex: 1
      },
      {
        id: 11,
        level: "beginner",
        topic: "bool",
        question: "ผลลัพธ์ของ bool('hello') คืออะไร?",
        options: ["True", "False", "None", "Error"],
        correctIndex: 0
      },
      {
        id: 12,
        level: "beginner",
        topic: "comparisons",
        question: "นิพจน์ใดให้ค่าเป็น True?",
        options: ["3 == '3'", "3 != 3", "3 < 5", "5 < 3"],
        correctIndex: 2
      },
      {
        id: 13,
        level: "beginner",
        topic: "list-index",
        question: "ให้ lst = [10,20,30] ค่า lst[1] คืออะไร?",
        options: ["10", "20", "30", "Error"],
        correctIndex: 1
      },
      {
        id: 14,
        level: "beginner",
        topic: "slicing",
        question: "ให้ s = 'Python' ค่า s[0:2] คืออะไร?",
        options: ["'Py'", "'P'", "'yt'", "'on'"],
        correctIndex: 0
      },
      {
        id: 15,
        level: "beginner",
        topic: "membership",
        question: "'py' in 'python' ให้ค่าอะไร?",
        options: ["True", "False", "None", "Error"],
        correctIndex: 0
      },
      {
        id: 16,
        level: "beginner",
        topic: "dict-basic",
        question: "โครงสร้างใดคือ dictionary?",
        options: ["[1,2,3]", "{1,2,3}", "{'a': 1, 'b': 2}", "(1,2,3)"],
        correctIndex: 2
      },
      {
        id: 17,
        level: "beginner",
        topic: "dict-get",
        question: "ให้ d = {'a':1,'b':2} ค่า d['a'] คืออะไร?",
        options: ["'a'", "1", "2", "Error"],
        correctIndex: 1
      },
      {
        id: 18,
        level: "beginner",
        topic: "while",
        question: "while-loop ใดเขียนได้ถูกต้อง?",
        options: [
          "while x < 10 x += 1",
          "while x < 10: x += 1",
          "while (x < 10) { x += 1 }",
          "while x < 10 then x += 1"
        ],
        correctIndex: 1
      },
      {
        id: 19,
        level: "beginner",
        topic: "function-def",
        question: "คำสั่งใดใช้ประกาศฟังก์ชัน?",
        options: [
          "func add(a,b):",
          "def add(a,b):",
          "function add(a,b):",
          "add def(a,b):"
        ],
        correctIndex: 1
      },
      {
        id: 20,
        level: "beginner",
        topic: "return",
        question: "ถ้าฟังก์ชันไม่มีคำสั่ง return จะคืนค่าอะไรโดยปริยาย?",
        options: ["0", "False", "None", "Error"],
        correctIndex: 2
      },

      // ===== Level 2: fundamental (21–40) =====
      {
        id: 21,
        level: "fundamental",
        topic: "list-comprehension",
        question: "ผลลัพธ์ของ [x*2 for x in range(3)] คืออะไร?",
        options: ["[0,2,4]", "[2,4,6]", "[1,2,3]", "[0,1,2]"],
        correctIndex: 0
      },
      {
        id: 22,
        level: "fundamental",
        topic: "if-else",
        question: "นิพจน์ใดเทียบเท่ากับ 'x ถ้า x>0 ไม่เช่นนั้น -x' แบบย่อ?",
        options: [
          "x if x>0 else -x",
          "if x>0 ? x : -x",
          "x ? x>0 : -x",
          "x if -x else x>0"
        ],
        correctIndex: 0
      },
      {
        id: 23,
        level: "fundamental",
        topic: "sum",
        question: "ให้ nums = [1,2,3,4] ค่า sum(nums) เท่ากับเท่าไร?",
        options: ["9", "10", "11", "Error"],
        correctIndex: 1
      },
      {
        id: 24,
        level: "fundamental",
        topic: "range",
        question: "list(range(2,7,2)) ให้ค่าอะไร?",
        options: ["[2,3,4,5,6,7]", "[2,4,6]", "[2,5]", "[3,5]"],
        correctIndex: 1
      },
      {
        id: 25,
        level: "fundamental",
        topic: "break",
        question: "คำสั่งใดใช้ยกเลิกลูปก่อนครบจำนวนรอบ?",
        options: ["stop", "exit", "break", "continue"],
        correctIndex: 2
      },
      {
        id: 26,
        level: "fundamental",
        topic: "continue",
        question: "คำสั่ง continue มีผลอย่างไร?",
        options: [
          "ออกจากลูป",
          "ข้ามรอบปัจจุบันแล้วไปทำรอบถัดไป",
          "จบโปรแกรมทันที",
          "รีเซ็ตตัวแปรในลูป"
        ],
        correctIndex: 1
      },
      {
        id: 27,
        level: "fundamental",
        topic: "functions",
        question: "ฟังก์ชันใดคืนค่าผลรวมของตัวเลข 1..n อย่างถูกต้อง?",
        options: [
          "sum(range(1,n))",
          "sum(range(n))",
          "sum(range(1,n+1))",
          "sum(1..n)"
        ],
        correctIndex: 2
      },
      {
        id: 28,
        level: "fundamental",
        topic: "default-param",
        question: "โค้ดใดประกาศ default parameter ได้ถูกต้อง?",
        options: [
          "def f(x=1,y): return x+y",
          "def f(x,y=1): return x+y",
          "def f(x,y):=1",
          "def f(x,y) = (x+y)"
        ],
        correctIndex: 1
      },
      {
        id: 29,
        level: "fundamental",
        topic: "import",
        question: "หากต้องการใช้ sqrt จาก math ต้องเขียนอย่างไร?",
        options: [
          "sqrt(4)",
          "math.sqrt(4)",
          "import sqrt; sqrt(4)",
          "from sqrt import math"
        ],
        correctIndex: 1
      },
      {
        id: 30,
        level: "fundamental",
        topic: "lambda",
        question: "นิยาม lambda function ถูกต้องคือข้อใด?",
        options: [
          "f(x) = x * 2",
          "lambda x: x * 2",
          "lam x -> x*2",
          "func(x): x*2"
        ],
        correctIndex: 1
      },
      {
        id: 31,
        level: "fundamental",
        topic: "strings",
        question: "'Python'.lower() ให้ผลอะไร?",
        options: ["'PYTHON'", "'python'", "'Python'", "Error"],
        correctIndex: 1
      },
      {
        id: 32,
        level: "fundamental",
        topic: "split-join",
        question: "'a,b,c'.split(',') ให้ค่าอะไร?",
        options: ["['a,b,c']", "['a','b','c']", "['a,','b,','c']", "('a','b','c')"],
        correctIndex: 1
      },
      {
        id: 33,
        level: "fundamental",
        topic: "join",
        question: "'-'.join(['a','b','c']) ให้ค่าอะไร?",
        options: ["'abc'", "'a-b-c'", "'a-bc'", "['a-b-c']"],
        correctIndex: 1
      },
      {
        id: 34,
        level: "fundamental",
        topic: "set",
        question: "set ใช้ประโยชน์หลักเรื่องใด?",
        options: [
          "เก็บข้อมูลเรียงตามลำดับ",
          "เก็บข้อมูลที่ซ้ำกันได้เท่านั้น",
          "เก็บข้อมูลที่ไม่ซ้ำ",
          "เก็บคู่ key-value"
        ],
        correctIndex: 2
      },
      {
        id: 35,
        level: "fundamental",
        topic: "set-op",
        question: "ให้ a={1,2,3} b={3,4} ค่า a & b คืออะไร?",
        options: ["{1,2,3,4}", "{1,2}", "{3}", "{4}"],
        correctIndex: 2
      },
      {
        id: 36,
        level: "fundamental",
        topic: "dict-iterate",
        question: "การวนลูป for k,v in d.items() ใช้กับอะไร?",
        options: [
          "วนค่าของ list",
          "วน key และ value ของ dict",
          "วน index ของ list",
          "วน element ของ set"
        ],
        correctIndex: 1
      },
      {
        id: 37,
        level: "fundamental",
        topic: "try-except",
        question: "บล็อก try/except ใดถูกต้อง?",
        options: [
          "try: x=1/0 else: print('error')",
          "try x=1/0 except: print('error')",
          "try: x=1/0\nexcept ZeroDivisionError:\n    print('error')",
          "try: x=1/0\ncatch: print('error')"
        ],
        correctIndex: 2
      },
      {
        id: 38,
        level: "fundamental",
        topic: "file-open",
        question: "เปิดไฟล์อ่านข้อความแบบมาตรฐานใช้โค้ดใดดีสุด?",
        options: [
          "f = open('a.txt')",
          "f = open('a.txt','w')",
          "with open('a.txt','r',encoding='utf-8') as f:",
          "open('a.txt','rb')"
        ],
        correctIndex: 2
      },
      {
        id: 39,
        level: "fundamental",
        topic: "bool-logic",
        question: "นิพจน์ใดเท่ากับ 'x อยู่ระหว่าง 0 และ 10 (รวม)'?",
        options: [
          "0 < x < 10",
          "0 <= x <= 10",
          "x >= 0 and x <= 10",
          "ทั้งข้อ 2 และ 3 ถูก"
        ],
        correctIndex: 3
      },
      {
        id: 40,
        level: "fundamental",
        topic: "enumerate",
        question: "enumerate(names,start=1) ให้ค่า i เริ่มต้นเป็นเท่าไร?",
        options: ["0", "1", "2", "index จริงของ list",],
        correctIndex: 1
      },

      // ===== Level 3: intermediate (41–60) =====
      {
        id: 41,
        level: "intermediate",
        topic: "mutable-default",
        question: "ปัญหาคลาสสิกของ default parameter แบบ list คืออะไร?",
        options: [
          "สร้าง list ใหม่ทุกครั้ง",
          "ใช้ list เดิมร่วมกันทุกครั้งที่ไม่ส่ง argument",
          "list ใช้กับฟังก์ชันไม่ได้",
          "ทำให้ฟังก์ชันช้าลงอย่างมาก"
        ],
        correctIndex: 1
      },
      {
        id: 42,
        level: "intermediate",
        topic: "args",
        question: "บทบาทของ *args คืออะไร?",
        options: [
          "รับ keyword arguments",
          "รับ positional arguments จำนวนไม่แน่นอน",
          "สร้าง list อัตโนมัติ",
          "ใช้ใน lambda เท่านั้น"
        ],
        correctIndex: 1
      },
      {
        id: 43,
        level: "intermediate",
        topic: "kwargs",
        question: "**kwargs ใช้เก็บอะไร?",
        options: [
          "ค่าคงที่ทั้งหมดในโมดูล",
          "arguments ที่ส่งเข้ามาแบบชื่อ=value",
          "ผลลัพธ์ return",
          "ตัวแปร global ทั้งโปรแกรม"
        ],
        correctIndex: 1
      },
      {
        id: 44,
        level: "intermediate",
        topic: "generator",
        question: "ข้อใดบรรยาย generator ได้ถูกต้องที่สุด?",
        options: [
          "โครงสร้างเก็บข้อมูลทั้งหมดในหน่วยความจำ",
          "ฟังก์ชันที่คืนค่าทีเดียว",
          "ฟังก์ชันที่ใช้ yield คืนค่าเป็นลำดับตามที่ถูก iterate",
          "ใช้ได้เฉพาะกับไฟล์"
        ],
        correctIndex: 2
      },
      {
        id: 45,
        level: "intermediate",
        topic: "list-vs-copy",
        question: "a = [[1],[2]]; b = a[:] แล้วแก้ a[0].append(99) ผลคืออะไร?",
        options: [
          "b ไม่เปลี่ยน",
          "ทั้ง a และ b แถวแรกถูกแก้เหมือนกัน",
          "เกิด Error",
          "b จะกลายเป็น list ว่าง"
        ],
        correctIndex: 1
      },
      {
        id: 46,
        level: "intermediate",
        topic: "deepcopy",
        question: "ถ้าต้องการ copy list ซ้อนหลายชั้นให้ไม่กระทบกัน ควรใช้?",
        options: [
          "a.copy()",
          "a[:]",
          "copy.deepcopy(a)",
          "list(a)"
        ],
        correctIndex: 2
      },
      {
        id: 47,
        level: "intermediate",
        topic: "sorted-key",
        question: "sorted(words, key=len) จะเรียงอะไร?",
        options: [
          "เรียงตามตัวอักษร",
          "เรียงตามความยาวของคำจากสั้นไปยาว",
          "เรียงตามความยาวจากยาวไปสั้น",
          "เรียงแบบสุ่ม"
        ],
        correctIndex: 1
      },
      {
        id: 48,
        level: "intermediate",
        topic: "dict-merge",
        question: "a|b (Python 3.9+) ใช้ทำอะไร?",
        options: [
          "ต่อ list",
          "ต่อ string",
          "merge dict สองตัว ถ้าซ้ำใช้ค่าของ b",
          "หาผลรวม key ทั้งหมด"
        ],
        correctIndex: 2
      },
      {
        id: 49,
        level: "intermediate",
        topic: "list-vs-tuple",
        question: "ข้อใดบอกความต่าง list กับ tuple ได้ถูก?",
        options: [
          "list immutable, tuple mutable",
          "ทั้งคู่ immutable",
          "ทั้งคู่ mutable",
          "list mutable, tuple immutable"
        ],
        correctIndex: 3
      },
      {
        id: 50,
        level: "intermediate",
        topic: "dict-get-default",
        question: "d.get('key', 0) หมายถึงอะไร?",
        options: [
          "ถ้า key ไม่มีให้ Error",
          "ถ้า key ไม่มี ให้คืน 0",
          "คืน tuple ('key',0)",
          "ลบ key ทิ้ง"
        ],
        correctIndex: 1
      },
      {
        id: 51,
        level: "intermediate",
        topic: "zip",
        question: "list(zip([1,2,3],[4,5])) ให้ค่าอะไร?",
        options: [
          "[(1,4),(2,5),(3,None)]",
          "[(1,4),(2,5)]",
          "[(1,2,3,4,5)]",
          "Error"
        ],
        correctIndex: 1
      },
      {
        id: 52,
        level: "intermediate",
        topic: "map",
        question: "list(map(lambda x:x+1,[1,2,3])) ให้ค่าอะไร?",
        options: ["[2,3,4]", "[1,2,3,4]", "[1,2,3]", "Error"],
        correctIndex: 0
      },
      {
        id: 53,
        level: "intermediate",
        topic: "filter",
        question: "list(filter(lambda x:x%2==0,[1,2,3,4])) ให้ค่าอะไร?",
        options: ["[1,3]", "[2,4]", "[1,2,3,4]", "[]"],
        correctIndex: 1
      },
      {
        id: 54,
        level: "intermediate",
        topic: "any-all",
        question: "any([0,'',3]) ให้ค่าอะไร?",
        options: ["True", "False", "None", "Error"],
        correctIndex: 0
      },
      {
        id: 55,
        level: "intermediate",
        topic: "any-all",
        question: "all([1,2,0]) ให้ค่าอะไร?",
        options: ["True", "False", "None", "Error"],
        correctIndex: 1
      },
      {
        id: 56,
        level: "intermediate",
        topic: "format",
        question: "f\"{x:.2f}\" ใช้ทำอะไร?",
        options: [
          "แปลง x เป็น int",
          "แสดง x เป็นทศนิยม 2 ตำแหน่ง",
          "แสดง x เป็นเลขฐานสอง",
          "ปัดเศษขึ้นเท่านั้น"
        ],
        correctIndex: 1
      },
      {
        id: 57,
        level: "intermediate",
        topic: "datetime",
        question: "โมดูลมาตรฐานที่ใช้จัดการวันที่/เวลา คืออะไร?",
        options: ["calendar", "time", "datetime", "date"],
        correctIndex: 2
      },
      {
        id: 58,
        level: "intermediate",
        topic: "list-slice",
        question: "x=[1,2,3,4,5]; x[1:-1:2] ให้ค่าอะไร?",
        options: ["[2,4]", "[2,3,4]", "[1,3,5]", "[2]"],
        correctIndex: 0
      },
      {
        id: 59,
        level: "intermediate",
        topic: "unpacking",
        question: "a,b,*rest = [1,2,3,4] ค่า rest คืออะไร?",
        options: ["[3,4]", "[2,3,4]", "[1,2,3]", "(3,4)"],
        correctIndex: 0
      },
      {
        id: 60,
        level: "intermediate",
        topic: "dict-unpack",
        question: "def f(a,b,c): return a+b+c; d={'a':1,'b':2,'c':3}; f(**d) ให้ค่าอะไร?",
        options: ["'123'", "6", "Error", "{'a':1,'b':2,'c':3}"],
        correctIndex: 1
      },

      // ===== Level 4: advanced (61–80) =====
      {
        id: 61,
        level: "advanced",
        topic: "closure",
        question: "โค้ด make/inner ที่เปลี่ยน x จาก 10 เป็น 20 ก่อน return inner แล้วเรียก f() จะพิมพ์ค่าใด?",
        options: ["10", "20", "Error", "None"],
        correctIndex: 1
      },
      {
        id: 62,
        level: "advanced",
        topic: "decorator",
        question: "@decorator เขียนไว้หน้าฟังก์ชันเทียบเท่ากับอะไร?",
        options: [
          "decorator()",
          "func = decorator(func)",
          "decorator = func(func)",
          "return decorator"
        ],
        correctIndex: 1
      },
      {
        id: 63,
        level: "advanced",
        topic: "context-manager",
        question: "class ที่ใช้กับ with ... as ... ต้องมีเมท็อดใด?",
        options: [
          "__call__ และ __init__",
          "__enter__ และ __exit__",
          "__get__ และ __set__",
          "__open__ และ __close__"
        ],
        correctIndex: 1
      },
      {
        id: 64,
        level: "advanced",
        topic: "exception-flow",
        question: "ใน try/except/finally ถ้าเกิด error และ except จับได้ finally จะรันหรือไม่?",
        options: ["ไม่รัน", "รันเฉพาะถ้าไม่มี error", "รันเสมอ", "แล้วแต่ชนิด error"],
        correctIndex: 2
      },
      {
        id: 65,
        level: "advanced",
        topic: "class-basic",
        question: "คำสั่งใดสร้างคลาสได้ถูกต้อง?",
        options: [
          "class A(): pass",
          "class A: pass",
          "ทั้งข้อ 1 และ 2",
          "ไม่ถูกทั้งคู่"
        ],
        correctIndex: 2
      },
      {
        id: 66,
        level: "advanced",
        topic: "class-instance",
        question: "สมมติ class A: pass; a = A() แล้ว type(a) คืออะไร?",
        options: ["A", "<class 'A'>", "object", "instance"],
        correctIndex: 1
      },
      {
        id: 67,
        level: "advanced",
        topic: "class-vs-instance-var",
        question: "class A: x=0; a1=A(); a2=A(); a1.x=5; A.x=10; แล้ว a2.x เป็นเท่าไร?",
        options: ["0", "5", "10", "Error"],
        correctIndex: 2
      },
      {
        id: 68,
        level: "advanced",
        topic: "inheritance",
        question: "class B(A): ... หมายถึงอะไร?",
        options: [
          "B เป็น subclass ของ A",
          "A เป็น subclass ของ B",
          "B เป็น instance ของ A",
          "A และ B ไม่เกี่ยวกัน"
        ],
        correctIndex: 0
      },
      {
        id: 69,
        level: "advanced",
        topic: "magic-methods",
        question: "เมท็อดใดใช้กำหนดพฤติกรรมของ object เมื่อใช้ฟังก์ชัน len()?",
        options: ["__len__", "__size__", "__length__", "__count__"],
        correctIndex: 0
      },
      {
        id: 70,
        level: "advanced",
        topic: "iterable",
        question: "object ที่ใช้ใน for x in obj ต้องมีอย่างน้อยเมท็อดใด?",
        options: ["__iter__", "__next__", "__call__", "__len__"],
        correctIndex: 0
      },
      {
        id: 71,
        level: "advanced",
        topic: "iterator",
        question: "iterator object มักต้องมีเมท็อดใดบ้าง?",
        options: [
          "__iter__ อย่างเดียว",
          "__next__ อย่างเดียว",
          "__iter__ และ __next__",
          "__call__ และ __next__"
        ],
        correctIndex: 2
      },
      {
        id: 72,
        level: "advanced",
        topic: "comprehension-sets",
        question: "{x*x for x in range(3)} ให้ค่าอะไร?",
        options: ["[0,1,4]", "{0,1,4}", "(0,1,4)", "{0,1,2,4}"],
        correctIndex: 1
      },
      {
        id: 73,
        level: "advanced",
        topic: "f-string",
        question: "f\"{name=}\" แสดงอะไร?",
        options: [
          "เฉพาะค่า name",
          "ชื่อ 'name' เท่านั้น",
          "ทั้งชื่อและค่าในรูปแบบ name=value",
          "Error"
        ],
        correctIndex: 2
      },
      {
        id: 74,
        level: "advanced",
        topic: "pathlib",
        question: "หากต้องการจัดการ path ไฟล์แบบ modern แนะนำใช้โมดูลใด?",
        options: ["os.path", "pathlib", "sys", "io"],
        correctIndex: 1
      },
      {
        id: 75,
        level: "advanced",
        topic: "type-hints",
        question: "ฟังก์ชันใดใช้ type hint ได้ถูกต้อง?",
        options: [
          "def add(a:int,b:int)->int: return a+b",
          "def add(a->int,b->int): return a+b",
          "def add(int a,int b): return a+b",
          "def add(a:int,b:int): int return a+b"
        ],
        correctIndex: 0
      },
      {
        id: 76,
        level: "advanced",
        topic: "list-vs-generator",
        question: "ความแตกต่างหลักของ [x*x for x in range(1000000)] กับ (x*x for x in range(1000000)) คืออะไร?",
        options: [
          "ทั้งคู่ใช้หน่วยความจำเท่ากัน",
          "list จะประมวลผลทีละตัวเสมอ",
          "generator ประหยัดหน่วยความจำกว่าเพราะสร้างค่าเมื่อถูกเรียกใช้",
          "generator เร็วกว่าเสมอ"
        ],
        correctIndex: 2
      },
      {
        id: 77,
        level: "advanced",
        topic: "context-manager-2",
        question: "ใน with open('a.txt') as f: หลังออกจากบล็อกแล้ว f เป็นอย่างไร?",
        options: [
          "ไฟล์ยังเปิดอยู่",
          "ไฟล์ถูกปิดโดยอัตโนมัติ",
          "ตัวแปร f ถูกลบ",
          "ทั้งไฟล์เปิดและปิดพร้อมกัน"
        ],
        correctIndex: 1
      },
      {
        id: 78,
        level: "advanced",
        topic: "exceptions-raise",
        question: "คำสั่ง raise ValueError('msg') ใช้เพื่อ?",
        options: [
          "แก้ error",
          "สร้างและโยน exception ประเภท ValueError",
          "ปิดโปรแกรมทันทีโดยไม่มีข้อความ",
          "รีสตาร์ทฟังก์ชัน"
        ],
        correctIndex: 1
      },
      {
        id: 79,
        level: "advanced",
        topic: "logging",
        question: "ถ้าต้องการ log แทนใช้ print ควรใช้โมดูลไหน?",
        options: ["trace", "logger", "logging", "debug"],
        correctIndex: 2
      },
      {
        id: 80,
        level: "advanced",
        topic: "virtual-env",
        question: "การใช้ virtual environment มีประโยชน์หลักเรื่องใด?",
        options: [
          "ทำให้ Python เร็วขึ้น",
          "แยกชุด dependencies ของโปรเจกต์ต่าง ๆ ออกจากกัน",
          "บีบอัดโค้ดให้สั้นลง",
          "ไม่ต้อง install package อีกเลย"
        ],
        correctIndex: 1
      },

      // ===== Level 5: applied / read code (81–100) =====
      {
        id: 81,
        level: "applied",
        topic: "read-code",
        code: "nums = [1, 2, 3]\nnums.append(4)\nnums = [x*2 for x in nums]\nprint(nums)",
        question: "โค้ดข้างต้นพิมพ์อะไร?",
        options: ["[1,2,3,4]", "[2,4,6,8]", "[2,4,6]", "[1,2,3,8]"],
        correctIndex: 1
      },
      {
        id: 82,
        level: "applied",
        topic: "read-code",
        code: "s = 'python'\nprint(s[::-1])",
        question: "ผลลัพธ์คืออะไร?",
        options: ["'python'", "'nothyp'", "'htypno'", "'nohtyp'"],
        correctIndex: 3
      },
      {
        id: 83,
        level: "applied",
        topic: "read-code",
        code: "d = {'a':1,'b':2}\nfor k,v in d.items():\n    print(k,v)\n",
        question: "บรรทัดใดเป็นไปได้มากที่สุดที่จะแสดงผล?",
        options: [
          "เฉพาะ 'a 1'",
          "เฉพาะ 'b 2'",
          "ทั้ง 'a 1' และ 'b 2' (ลำดับไม่รับประกัน)",
          "Error"
        ],
        correctIndex: 2
      },
      {
        id: 84,
        level: "applied",
        topic: "read-code",
        code: "def f(x, lst=None):\n    if lst is None:\n        lst = []\n    lst.append(x)\n    return lst\n\nprint(f(1))\nprint(f(2))\n",
        question: "ผลลัพธ์สองบรรทัดคืออะไร?",
        options: [
          "[1] และ [1,2]",
          "[1] และ [2]",
          "[1,2] และ [1,2]",
          "Error"
        ],
        correctIndex: 0
      },
      {
        id: 85,
        level: "applied",
        topic: "read-code",
        code: "def gen():\n    for i in range(3):\n        yield i\n\ng = gen()\nprint(next(g))\nprint(next(g))\nprint(list(g))\n",
        question: "โค้ดนี้จะพิมพ์อะไร?",
        options: [
          "0,1,[0,1,2]",
          "0,1,[2]",
          "0,1,[1,2]",
          "Error"
        ],
        correctIndex: 1
      },
      {
        id: 86,
        level: "applied",
        topic: "read-code",
        code: "nums = [1,2,3,4,5]\nevens = [x for x in nums if x%2==0]\nprint(evens)",
        question: "ค่าที่พิมพ์คืออะไร?",
        options: ["[1,3,5]", "[2,4]", "[2,4,6]", "[1,2,3,4,5]"],
        correctIndex: 1
      },
      {
        id: 87,
        level: "applied",
        topic: "read-code",
        code: "import math\nprint(math.ceil(3.1), math.floor(3.9))",
        question: "จะพิมพ์ค่าใด?",
        options: ["3 3", "4 4", "4 3", "3 4"],
        correctIndex: 2
      },
      {
        id: 88,
        level: "applied",
        topic: "read-code",
        code: "text = 'a,b,,c'\nprint(text.split(','))",
        question: "ผลลัพธ์คืออะไร?",
        options: ["['a','b','c']", "['a','b','','c']", "['a','b',',','c']", "['a b  c']"],
        correctIndex: 1
      },
      {
        id: 89,
        level: "applied",
        topic: "read-code",
        code: "scores = {'Ann':8,'Bob':5,'Cat':9}\nprint(sorted(scores.items(), key=lambda x:x[1], reverse=True)[0][0])",
        question: "โค้ดนี้หาอะไร?",
        options: [
          "ชื่อที่มีคะแนนน้อยสุด",
          "ชื่อที่มีคะแนนมากสุด",
          "คะแนนเฉลี่ย",
          "Error"
        ],
        correctIndex: 1
      },
      {
        id: 90,
        level: "applied",
        topic: "read-code",
        code: "def factorial(n):\n    return 1 if n<=1 else n*factorial(n-1)\n\nprint(factorial(4))",
        question: "ผลลัพธ์คืออะไร?",
        options: ["4", "6", "24", "120"],
        correctIndex: 2
      },
      {
        id: 91,
        level: "applied",
        topic: "read-code",
        code: "nums = [1,2,3]\nnums2 = nums\nnums2.append(4)\nprint(nums)",
        question: "ผลลัพธ์คืออะไร?",
        options: ["[1,2,3]", "[1,2,3,4]", "[4]", "Error"],
        correctIndex: 1
      },
      {
        id: 92,
        level: "applied",
        topic: "read-code",
        code: "a = {1,2,3}\nb = {3,4}\nprint(a.union(b), a.intersection(b))",
        question: "ผลลัพธ์คืออะไร?",
        options: [
          "{1,2,3,4} {3}",
          "{1,2,3} {3,4}",
          "{1,2,3,4} {1,2,3,4}",
          "{3} {1,2,3,4}"
        ],
        correctIndex: 0
      },
      {
        id: 93,
        level: "applied",
        topic: "read-code",
        code: "from collections import Counter\ncnt = Counter('banana')\nprint(cnt['a'])",
        question: "ผลลัพธ์คืออะไร?",
        options: ["1", "2", "3", "4"],
        correctIndex: 2
      },
      {
        id: 94,
        level: "applied",
        topic: "read-code",
        code: "nums = [1,2,3,4]\nprint(nums[::-1])",
        question: "ค่าที่พิมพ์คืออะไร?",
        options: ["[1,2,3,4]", "[4,3,2,1]", "[2,3,4]", "[4,3]"],
        correctIndex: 1
      },
      {
        id: 95,
        level: "applied",
        topic: "read-code",
        code: "s = 'Hello World'\nprint(s.replace('o','0'))",
        question: "ผลลัพธ์คืออะไร?",
        options: ["Hell0 W0rld", "Hell0 World", "Hello W0rld", "Error"],
        correctIndex: 0
      },
      {
        id: 96,
        level: "applied",
        topic: "read-code",
        code: "nums = [1,2,3,4]\nprint(sum(x for x in nums if x%2==1))",
        question: "ผลรวมเลขคี่คือเท่าไร?",
        options: ["4", "6", "8", "10"],
        correctIndex: 1
      },
      {
        id: 97,
        level: "applied",
        topic: "read-code",
        code: "def is_pal(s):\n    s = s.lower()\n    return s == s[::-1]\n\nprint(is_pal('Level'))",
        question: "ผลลัพธ์คืออะไร?",
        options: ["True", "False", "None", "Error"],
        correctIndex: 0
      },
      {
        id: 98,
        level: "applied",
        topic: "read-code",
        code: "nums = [1,2,3,4]\nfor i,x in enumerate(nums):\n    nums[i] = x*2\nprint(nums)",
        question: "ค่าที่พิมพ์คืออะไร?",
        options: ["[1,2,3,4]", "[2,4,6,8]", "[2,3,4,5]", "[0,2,4,6]"],
        correctIndex: 1
      },
      {
        id: 99,
        level: "applied",
        topic: "read-code",
        code: "def f(x):\n    try:\n        return 1/x\n    except ZeroDivisionError:\n        return 'inf'\n\nprint(f(0))",
        question: "ผลลัพธ์คืออะไร?",
        options: ["0", "Error", "'inf'", "None"],
        correctIndex: 2
      },
      {
        id: 100,
        level: "applied",
        topic: "read-code",
        code: "def make_multiplier(k):\n    def inner(x):\n        return k*x\n    return inner\n\ndouble = make_multiplier(2)\nprint(double(5))",
        question: "โค้ดนี้จะพิมพ์อะไร?",
        options: ["2", "5", "7", "10"],
        correctIndex: 3
      }
    ];

    // ===== Quiz engine =====
    let currentIndex = 0;
    let correctCount = 0;
    let wrongCount = 0;
    let answered = new Array(questions.length).fill(null); // เก็บ index ตัวเลือกที่ตอบ

    const questionNumberEl = document.getElementById("question-number");
    const questionTextEl = document.getElementById("question-text");
    const questionCodeEl = document.getElementById("question-code");
    const optionsEl = document.getElementById("options");
    const feedbackEl = document.getElementById("feedback");
    const levelPillEl = document.getElementById("level-pill");
    const scoreCorrectEl = document.getElementById("score-correct");
    const scoreWrongEl = document.getElementById("score-wrong");
    const progressFillEl = document.getElementById("progress-fill");
    const progressLabelEl = document.getElementById("progress-label");
    const progressPercentEl = document.getElementById("progress-percent");
    const summaryTextEl = document.getElementById("summary-text");
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");

    function renderQuestion() {
      const q = questions[currentIndex];

      questionNumberEl.textContent = `ข้อที่ ${q.id} / ${questions.length}`;
      questionTextEl.textContent = q.question;
      if (q.code) {
        questionCodeEl.style.display = "block";
        questionCodeEl.textContent = q.code;
      } else {
        questionCodeEl.style.display = "none";
      }

      levelPillEl.textContent = `ระดับ: ${q.level}`;
      optionsEl.innerHTML = "";
      feedbackEl.textContent = "";
      feedbackEl.className = "feedback";

      const letters = ["A", "B", "C", "D"];
      q.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.dataset.index = idx;

        const tag = document.createElement("span");
        tag.className = "tag";
        tag.textContent = letters[idx];

        const text = document.createElement("span");
        text.className = "option-text";
        text.textContent = opt;

        btn.appendChild(tag);
        btn.appendChild(text);
        btn.addEventListener("click", () => handleAnswer(idx));

        optionsEl.appendChild(btn);
      });

      const saved = answered[currentIndex];
      if (saved !== null) {
        // เคยตอบแล้ว – แสดงสถานะ
        showAnswerState(saved);
      }

      updateProgress();
      prevBtn.disabled = currentIndex === 0;
      nextBtn.textContent = currentIndex === questions.length - 1 ? "จบชุดข้อสอบ" : "ข้อต่อไป";

      updateSummary();
    }

    function handleAnswer(chosenIndex) {
      const q = questions[currentIndex];
      const prev = answered[currentIndex];

      if (prev !== null) {
        // ถ้าเคยตอบแล้ว ให้ปรับสถิติใหม่ (ลบผลเก่าออกก่อน)
        const prevCorrect = prev === q.correctIndex;
        if (prevCorrect) correctCount--;
        else wrongCount--;
      }

      answered[currentIndex] = chosenIndex;
      const isCorrect = chosenIndex === q.correctIndex;
      if (isCorrect) correctCount++;
      else wrongCount++;

      showAnswerState(chosenIndex);
      updateSummary();
    }

    function showAnswerState(chosenIndex) {
      const q = questions[currentIndex];
      const children = Array.from(optionsEl.children);
      children.forEach((btn, idx) => {
        btn.classList.add("disabled");
        btn.disabled = true;
        btn.classList.remove("correct", "wrong");
        if (idx === q.correctIndex) {
          btn.classList.add("correct");
        }
        if (idx === chosenIndex && idx !== q.correctIndex) {
          btn.classList.add("wrong");
        }
      });

      const letters = ["A", "B", "C", "D"];
      const correctText = q.options[q.correctIndex];
      if (chosenIndex === q.correctIndex) {
        feedbackEl.textContent = `✅ ถูกต้อง! เฉลย: ข้อ ${letters[q.correctIndex]}) ${correctText}`;
        feedbackEl.className = "feedback correct";
      } else {
        feedbackEl.textContent = `❌ ยังไม่ถูก เฉลยที่ถูกคือ ข้อ ${letters[q.correctIndex]}) ${correctText}`;
        feedbackEl.className = "feedback wrong";
      }

      scoreCorrectEl.textContent = correctCount;
      scoreWrongEl.textContent = wrongCount;
    }

    function updateProgress() {
      const answeredCount = answered.filter((x) => x !== null).length;
      const percent = Math.round(((currentIndex + 1) / questions.length) * 100);
      progressFillEl.style.width = percent + "%";
      progressLabelEl.textContent = `ข้อ ${currentIndex + 1} / ${questions.length}`;
      progressPercentEl.textContent = `${percent}%`;
    }

    function updateSummary() {
      const answeredCount = answered.filter((x) => x !== null).length;
      const total = questions.length;
      const percentScore = total ? Math.round((correctCount / total) * 100) : 0;

      if (answeredCount === 0) {
        summaryTextEl.textContent =
          "เริ่มทำได้เลย — กดคำตอบแล้วดูเฉลยทันที จากนั้นกดปุ่ม “ข้อต่อไป”.";
      } else if (answeredCount < total) {
        summaryTextEl.textContent = `ทำไปแล้ว ${answeredCount}/${total} ข้อ | ถูก ${correctCount} ผิด ${wrongCount} | คะแนนปัจจุบัน ~${percentScore}%`;
      } else {
        summaryTextEl.textContent = `จบครบ 100 ข้อแล้ว! ✔️ ถูก ${correctCount} ผิด ${wrongCount} | คะแนนรวม ${percentScore}% ลองกลับไปแก้ข้อที่ผิดเพื่อฝึกเพิ่มได้เลย`;
      }
    }

    prevBtn.addEventListener("click", () => {
      if (currentIndex > 0) {
        currentIndex--;
        renderQuestion();
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentIndex < questions.length - 1) {
        currentIndex++;
        renderQuestion();
      } else {
        // กลับไปต้นชุดเมื่อจบทั้งหมด
        currentIndex = 0;
        renderQuestion();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    });

    // เริ่มต้น
    renderQuestion();
  </script>
</body>
</html>
